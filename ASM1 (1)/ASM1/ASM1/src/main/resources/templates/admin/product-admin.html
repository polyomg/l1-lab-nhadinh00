<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>üå∏ Qu·∫£n l√Ω S·∫£n ph·∫©m</title>
  <style>
	* {
	  margin: 0;
	  padding: 0;
	  box-sizing: border-box;
	}
	body {
	  font-family: 'Poppins', sans-serif;
	  background: linear-gradient(135deg, #fff0f5 0%, #fde2e4 100%);
	  min-height: 100vh;
	  color: #333;
	  display: flex;
	  justify-content: center;
	  align-items: flex-start;
	  padding: 50px 20px;
	}
	.container {
	  width: 95%;
	  max-width: 1250px;
	  background: rgba(255, 255, 255, 0.95);
	  border-radius: 20px;
	  padding: 50px 70px;
	  box-shadow: 0 10px 40px rgba(255, 192, 203, 0.35);
	  backdrop-filter: blur(10px);
	  border: 1px solid rgba(255, 182, 193, 0.3);
	}
	h2 {
	  text-align: center;
	  color: #d63384;
	  font-size: 2.2rem;
	  margin-bottom: 40px;
	  letter-spacing: 0.5px;
	}
	form {
	  background: rgba(255, 255, 255, 0.95);
	  border-radius: 14px;
	  padding: 30px 35px;
	  margin-bottom: 40px;
	  box-shadow: 0 4px 20px rgba(255, 182, 193, 0.25);
	  border: 1px solid rgba(255, 182, 193, 0.25);
	}
	label {
	  display: block;
	  font-weight: 600;
	  color: #555;
	  margin-bottom: 8px;
	}
	input[type="text"], input[type="number"], input[type="file"], select, textarea {
	  width: 100%;
	  padding: 12px 14px;
	  margin-bottom: 18px;
	  border: 1px solid #f2cdda;
	  border-radius: 10px;
	  outline: none;
	  background: #fffafc;
	  transition: 0.3s;
	}
	input:focus, select:focus, textarea:focus {
	  border-color: #ff80ab;
	  box-shadow: 0 0 6px rgba(255, 128, 171, 0.4);
	}
	button, .btn, .search-container a {
	  background-color: #ff80ab;
	  color: white;
	  border: none;
	  border-radius: 12px;
	  padding: 12px 22px;
	  cursor: pointer;
	  font-weight: 600;
	  transition: 0.3s;
	  box-shadow: 0 4px 10px rgba(255, 128, 171, 0.3);
	  text-decoration: none;
	  display: inline-block;
	  text-align: center;
	}
	.btn {
	  display: inline-flex;
	  align-items: center;
	  justify-content: center;
	  gap: 5px;
	  padding: 4px 10px;
	  font-size: 0.85rem;
	  font-weight: 500;
	  border: none;
	  border-radius: 6px;
	  cursor: pointer;
	  transition: 0.25s;
	  text-decoration: none;
	  color: white;
	}
	.btn-primary { background-color: #6f42c1; }
	.btn-primary:hover { background-color: #5a32a3; transform: translateY(-1px); }
	.btn-danger { background-color: #ff4d4d; }
	.btn-danger:hover { background-color: #e60026; transform: translateY(-1px); }
	.action-buttons {
	  display: flex;
	  flex-direction: column;
	  gap: 6px;
	  align-items: flex-start;
	}
	.product-table-container {
	  background: white;
	  padding: 18px 25px;
	  border-radius: 14px;
	  border: 1px solid rgba(255, 182, 193, 0.4);
	  box-shadow: 0 4px 20px rgba(255, 182, 193, 0.2);
	}
	td, th { line-height: 1.4; }
	.search-container {
	  display: flex;
	  gap: 10px;
	  margin-bottom: 25px;
	}
	.search-container input[type="text"] {
	  flex: 1;
	  padding: 10px 14px;
	  border-radius: 10px;
	  border: 1px solid #f2cdda;
	  background-color: #fffafc;
	  outline: none;
	  transition: 0.3s;
	}
	.search-container input[type="text"]:focus {
	  border-color: #ff80ab;
	  box-shadow: 0 0 4px rgba(255, 128, 171, 0.4);
	}
	table {
	  width: 100%;
	  border-collapse: collapse;
	  border-radius: 12px;
	  overflow: hidden;
	  background: #fff;
	  box-shadow: 0 4px 20px rgba(255, 182, 193, 0.2);
	}
	th, td {
	  padding: 14px 16px;
	  text-align: left;
	  border-bottom: 1px solid #fce4ec;
	}
	th {
	  background-color: #ffb6c1;
	  color: white;
	  font-weight: 700;
	  text-transform: uppercase;
	  font-size: 14px;
	  letter-spacing: 0.3px;
	}
	tr:hover { background-color: #fff0f5; }
	img {
	  border-radius: 8px;
	  width: 60px;
	  height: auto;
	  border: 1px solid #f8bbd0;
	}
	.pagination {
	  display: flex;
	  justify-content: center;
	  gap: 10px;
	  margin-top: 35px;
	}
	.pagination a {
	  padding: 8px 14px;
	  background-color: #ffe6f2;
	  border-radius: 10px;
	  color: #d63384;
	  text-decoration: none;
	  transition: 0.3s;
	  font-weight: 500;
	}
	.pagination a:hover, .pagination .active {
	  background-color: #ff80ab;
	  color: #fff;
	}
  </style>
</head>
<body>
  <div class="container">
    <h2>üå∏ Qu·∫£n l√Ω S·∫£n ph·∫©m üå∏</h2>

    <!-- FORM -->
    <form th:action="@{/admin/products/save}" method="post" th:object="${product}" enctype="multipart/form-data">
      <input type="hidden" th:field="*{maSP}" />

      <label>T√™n s·∫£n ph·∫©m:</label>
      <input type="text" th:field="*{tenSP}" required />

      <label>Gi√° s·∫£n ph·∫©m:</label>
      <input type="number" th:field="*{giaSP}" required />

      <label>Lo·∫°i s·∫£n ph·∫©m:</label>
      <select th:field="*{loaiSP.maLoai}">
        <option th:each="loai : ${loaiSPs}" th:value="${loai.maLoai}" th:text="${loai.tenLoai}"></option>
      </select>

      <label>H√¨nh ·∫£nh s·∫£n ph·∫©m:</label>
      <input type="file" name="fileHinhSP" accept="image/*" />

      <label>H√¨nh n·ªÅn s·∫£n ph·∫©m:</label>
      <input type="file" name="fileHinhNenSP" accept="image/*" />

      <label>S·ªë l∆∞·ª£ng s·∫£n ph·∫©m:</label>
      <input type="number" th:field="*{soLuong}" required />

      <label>Chi ti·∫øt s·∫£n ph·∫©m:</label>
      <textarea th:field="*{chiTietSP}" rows="4"></textarea>

      <button type="submit" class="btn-success">üíæ L∆∞u s·∫£n ph·∫©m</button>
    </form>

    <!-- T√åM KI·∫æM -->
    <div class="search-container">
      <form th:action="@{/admin/products}" method="get">
        <input type="text" name="keyword" placeholder="üîç T√¨m theo t√™n ho·∫∑c m√£ s·∫£n ph·∫©m" />
        <button type="submit">T√¨m</button>
        <a href="/admin/products" class="btn-success">L√†m m·ªõi</a>
      </form>
    </div>

    <!-- B·∫¢NG -->
    <table>
      <thead>
        <tr>
          <th>M√£ SP</th>
          <th>T√™n SP</th>
          <th>Gi√°</th>
          <th>Lo·∫°i SP</th>
          <th>S·ªë l∆∞·ª£ng</th>
          <th>H√¨nh</th>
          <th>Chi ti·∫øt</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="sp : ${products}">
          <td th:text="${sp.maSP}"></td>
          <td th:text="${sp.tenSP}"></td>
          <td th:text="${sp.giaSP}"></td>
          <td th:text="${sp.loaiSP.tenLoai}"></td>
          <td th:text="${sp.soLuong}"></td>
          <td><img th:src="${sp.hinhSP}" alt="H√¨nh SP"></td>
          <td th:text="${sp.chiTietSP}"></td>
          <td>
            <a th:href="@{/admin/products/edit/{id}(id=${sp.maSP})}" class="btn btn-primary">‚úèÔ∏è S·ª≠a</a>
            <a th:href="@{/admin/products/delete/{id}(id=${sp.maSP})}" class="btn btn-danger" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a?');">üóëÔ∏è X√≥a</a>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- PH√ÇN TRANG (T∆Ø∆†NG TH√çCH M·ªåI PHI√äN B·∫¢N THYMELEAF) -->
<div class="pagination">
  <a th:if="${currentPage > 0}" th:href="@{/admin/products(page=${currentPage - 1}, keyword=${keyword})}">¬´ Tr∆∞·ªõc</a>

  <th:block th:if="${totalPages != null}">
    <a th:each="i : ${#numbers.sequence(0, totalPages > 0 ? totalPages - 1 : 0)}"
       th:classappend="${i == currentPage} ? 'active'"
       th:href="@{/admin/products(page=${i}, keyword=${keyword})}"
       th:text="${i + 1}"></a>
  </th:block>

  <a th:if="${totalPages != null and currentPage < totalPages - 1}"
     th:href="@{/admin/products(page=${currentPage + 1}, keyword=${keyword})}">Sau ¬ª</a>
</div>

      <a th:if="${currentPage > 0}" th:href="@{/admin/products(page=${currentPage - 1}, keyword=${keyword})}">¬´ Tr∆∞·ªõc</a>
      <span th:if="${totalPages != null}">
        <a th:each="i : ${#numbers.sequence(0, (totalPages != null ? totalPages - 1 : 0))}"
           th:classappend="${i == currentPage} ? 'active'"
           th:href="@{/admin/products(page=${i}, keyword=${keyword})}"
           th:text="${i + 1}"></a>
      </span>
      <a th:if="${currentPage < ((totalPages != null ? totalPages : 1) - 1)}"
         th:href="@{/admin/products(page=${currentPage + 1}, keyword=${keyword})}">Sau ¬ª</a>
    </div>
  </div>
</body>
</html>
